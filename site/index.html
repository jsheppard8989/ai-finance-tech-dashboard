<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI, Finance, Tech: Scarcity & Abundance</title>
  <!-- Auto-updated via pipeline -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh;
      color: #e8e8e8;
      line-height: 1.6;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1rem;
    }

    /* Header */
    header {
      text-align: center;
      padding: 1.5rem 1rem;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 16px;
      margin-bottom: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #00d4ff 0%, #7b2cbf 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: #8892b0;
      font-size: 1.1rem;
    }

    /* Grid Layout - 3 Columns (middle is widest: 3/7, sides 2/7 each) */
    .grid {
      display: grid;
      grid-template-columns: 2fr 3fr 2fr;
      gap: 0.75rem;
      max-width: 100%;
      box-sizing: border-box;
    }

    .left-col, .middle-col, .right-col {
      min-width: 0;
      overflow-wrap: break-word;
    }

    @media (max-width: 1200px) {
      .grid {
        grid-template-columns: 1fr 1fr;
      }
      .right-col {
        grid-column: 1 / -1;
      }
    }

    @media (max-width: 768px) {
      /* Grid */
      .grid {
        grid-template-columns: 1fr;
      }
      .right-col {
        grid-column: auto;
      }

      /* Column order: center (insights/tickers) first on mobile */
      .middle-col { order: 1; }
      .left-col   { order: 2; }
      .right-col  { order: 3; }

      /* Header ‚Äî pull absolute ticker badges into normal flow */
      header {
        padding-bottom: 0.75rem;
      }
      header h1 {
        font-size: 1.5rem;
      }
      .header-qqq-badge,
      .header-btc-badge {
        position: static !important;
        display: inline-flex !important;
        bottom: auto !important;
        left: auto !important;
        right: auto !important;
        margin-top: 0.5rem;
        margin-right: 0.5rem;
      }

      /* Ticker cards ‚Äî stack vertically */
      .ticker-header {
        flex-direction: column;
        gap: 0.4rem;
      }
      .ticker-main {
        align-items: center;
      }
      .ticker-rank {
        font-size: 1.1rem;
        min-width: 24px;
      }
      .ticker-symbol {
        font-size: 1.3rem;
      }
      .ticker-meta {
        align-items: flex-start;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 0.3rem;
      }
      .ticker-details {
        flex-wrap: wrap;
        gap: 0.5rem;
      }
      .detail-label {
        font-size: 0.55rem;
      }
      .detail-value {
        font-size: 0.75rem;
      }

      /* Stock items (big BTC/top card) */
      .stock-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.4rem;
        padding: 0.75rem;
      }
      .stock-grid {
        gap: 0.5rem;
      }

      /* Chart modal */
      .chart-modal {
        padding: 0.5rem;
      }
      .chart-container {
        height: auto;
        max-height: 80vh;
        padding: 1rem;
      }
      .chart-header h3 {
        font-size: 1.1rem;
      }

      /* Podcast modal */
      .podcast-modal {
        padding: 0.5rem;
      }
      .podcast-container {
        max-height: 92vh;
      }
      .podcast-header {
        padding: 1rem;
      }
      .podcast-header h3 {
        font-size: 1rem;
      }
      .podcast-content {
        padding: 1rem;
        max-height: calc(92vh - 70px);
      }
    }

    /* Cards */
    .card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      margin-bottom: 1rem;
    }

    .card h2 {
      font-size: 1.3rem;
      color: #00d4ff;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .card h2::before {
      content: '';
      display: inline-block;
      width: 4px;
      height: 24px;
      background: linear-gradient(180deg, #00d4ff, #7b2cbf);
      border-radius: 2px;
    }

    /* Definitions Section - Clickable Cards */
    .definition-item {
      background: rgba(0, 212, 255, 0.05);
      border-left: 3px solid #00d4ff;
      padding: 0.75rem;
      margin-bottom: 0.75rem;
      border-radius: 0 10px 10px 0;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .definition-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(123, 44, 191, 0.05) 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .definition-item:hover {
      border-left-width: 5px;
      background: rgba(0, 212, 255, 0.08);
      transform: translateX(4px);
    }

    .definition-item:hover::before {
      opacity: 1;
    }

    .definition-item.active {
      border-left-width: 6px;
      background: rgba(0, 212, 255, 0.12);
      box-shadow: 0 4px 20px rgba(0, 212, 255, 0.1);
    }

    .definition-item h3 {
      color: #00d4ff;
      font-size: 1.05rem;
      margin-bottom: 0.4rem;
      font-weight: 600;
    }

    .definition-item p {
      color: #a8b2d1;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .definition-expanded {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, opacity 0.3s ease, padding 0.3s ease, margin 0.3s ease;
      opacity: 0;
      padding: 0;
      margin: 0;
    }

    .definition-item.active .definition-expanded {
      max-height: 150px;
      opacity: 1;
      padding-top: 0.75rem;
      margin-top: 0.5rem;
      border-top: 1px solid rgba(0, 212, 255, 0.2);
    }

    /* Overton Window Section - Clickable Cards */
    .overton-item {
      background: rgba(123, 44, 191, 0.1);
      border: 1px solid rgba(123, 44, 191, 0.3);
      padding: 0.75rem;
      margin-bottom: 0.75rem;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .overton-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(123, 44, 191, 0.15) 0%, rgba(0, 212, 255, 0.1) 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .overton-item:hover {
      border-color: rgba(123, 44, 191, 0.5);
      box-shadow: 0 6px 24px rgba(123, 44, 191, 0.15);
      transform: translateY(-2px);
    }

    .overton-item:hover::before {
      opacity: 1;
    }

    .overton-item.active {
      border-color: rgba(123, 44, 191, 0.7);
      box-shadow: 0 8px 32px rgba(123, 44, 191, 0.2);
    }

    .overton-item .term {
      font-weight: 700;
      color: #e8e8e8;
      font-size: 1rem;
      margin-bottom: 0.35rem;
    }

    .overton-item .source {
      font-size: 0.75rem;
      color: #8892b0;
      margin-top: 0.5rem;
      font-style: italic;
    }

    .overton-item .description {
      font-size: 0.9rem;
      color: #a8b2d1;
      margin-top: 0.35rem;
      line-height: 1.5;
    }

    .overton-expanded {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, opacity 0.3s ease, padding 0.3s ease, margin 0.3s ease;
      opacity: 0;
      padding: 0;
      margin: 0;
      border-top: 1px solid transparent;
    }

    .overton-item.active .overton-expanded {
      max-height: 150px;
      opacity: 1;
      padding-top: 0.75rem;
      margin-top: 0.75rem;
      border-top-color: rgba(255, 255, 255, 0.1);
    }

    /* Suggestions Box */
    .suggestions-box {
      background: rgba(255, 193, 7, 0.1);
      border: 2px dashed rgba(255, 193, 7, 0.5);
      border-radius: 10px;
      padding: 0.8rem;
      margin-top: 0.8rem;
    }

    .suggestions-box h3 {
      color: #ffc107;
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }

    .suggestion-item {
      background: rgba(0, 0, 0, 0.3);
      padding: 0.75rem 1rem;
      margin-bottom: 0.5rem;
      border-radius: 8px;
    }

    .suggestion-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .suggestion-item .word {
      font-weight: 600;
      color: #ffc107;
    }

    .vote-counts {
      display: flex;
      gap: 1rem;
      font-size: 0.85rem;
    }

    .vote-count {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .vote-count.up {
      color: #4caf50;
    }

    .vote-count.down {
      color: #f44336;
    }

    .vote-count.threshold {
      color: #ffc107;
      font-weight: 600;
    }

    .vote-buttons {
      display: flex;
      gap: 0.5rem;
    }

    .vote-btn {
      background: none;
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: #fff;
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s;
    }

    .vote-btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .vote-btn.approve:hover {
      background: rgba(76, 175, 80, 0.3);
      border-color: #4caf50;
    }

    .vote-btn.reject:hover {
      background: rgba(244, 67, 54, 0.3);
      border-color: #f44336;
    }

    .status-badge {
      font-size: 0.75rem;
      padding: 0.15rem 0.5rem;
      border-radius: 4px;
      font-weight: 600;
    }

    .status-badge.ready {
      background: rgba(76, 175, 80, 0.2);
      color: #4caf50;
      border: 1px solid #4caf50;
    }

    /* Stock Picks Section */
    .stock-grid {
      display: grid;
      gap: 1rem;
    }

    .stock-item {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(123, 44, 191, 0.1) 100%);
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 12px;
      padding: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .stock-item.bitcoin {
      background: linear-gradient(135deg, rgba(247, 147, 26, 0.1) 0%, rgba(247, 147, 26, 0.2) 100%);
      border: 1px solid rgba(247, 147, 26, 0.4);
    }

    .stock-item.bitcoin .ticker {
      color: #f7931a;
    }

    .stock-item.bitcoin .score {
      color: #f7931a;
    }

    .stock-item .rank {
      font-size: 2rem;
      font-weight: 700;
      color: #00d4ff;
      opacity: 0.5;
    }

    .stock-item .info {
      flex: 1;
      margin-left: 1rem;
    }

    .stock-item .ticker {
      font-size: 1.5rem;
      font-weight: 700;
      color: #fff;
    }

    .stock-item .score {
      font-size: 0.9rem;
      color: #00d4ff;
    }

    .stock-item .mentions {
      font-size: 0.85rem;
      color: #8892b0;
    }

    /* Enhanced Ticker Cards - Clickable Format */
    .ticker-card {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.05) 0%, rgba(123, 44, 191, 0.05) 100%);
      border: 1px solid rgba(0, 212, 255, 0.15);
      border-radius: 12px;
      padding: 0;
      margin-bottom: 0.75rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .ticker-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(123, 44, 191, 0.1) 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .ticker-card:hover {
      border-color: rgba(0, 212, 255, 0.5);
      box-shadow: 0 8px 32px rgba(0, 212, 255, 0.15), 0 0 0 1px rgba(0, 212, 255, 0.3);
      transform: translateY(-2px);
    }

    .ticker-card:hover::before {
      opacity: 1;
    }

    .ticker-card.active {
      border-color: rgba(0, 212, 255, 0.7);
      box-shadow: 0 12px 40px rgba(0, 212, 255, 0.2), 0 0 0 2px rgba(0, 212, 255, 0.4);
    }

    .ticker-card.hidden-gem {
      background: linear-gradient(135deg, rgba(255, 193, 7, 0.08) 0%, rgba(255, 152, 0, 0.05) 100%);
      border-color: rgba(255, 193, 7, 0.3);
    }

    .ticker-card.hidden-gem:hover {
      border-color: rgba(255, 193, 7, 0.6);
      box-shadow: 0 8px 32px rgba(255, 193, 7, 0.2), 0 0 0 1px rgba(255, 193, 7, 0.4);
    }

    .ticker-card.hidden-gem.active {
      border-color: rgba(255, 193, 7, 0.8);
      box-shadow: 0 12px 40px rgba(255, 193, 7, 0.25), 0 0 0 2px rgba(255, 193, 7, 0.5);
    }

    .ticker-card.contrarian {
      background: linear-gradient(135deg, rgba(76, 175, 80, 0.08) 0%, rgba(139, 195, 74, 0.05) 100%);
      border-color: rgba(76, 175, 80, 0.3);
    }

    .ticker-card.contrarian:hover {
      border-color: rgba(76, 175, 80, 0.6);
      box-shadow: 0 8px 32px rgba(76, 175, 80, 0.2), 0 0 0 1px rgba(76, 175, 80, 0.4);
    }

    .ticker-card.crowded {
      background: linear-gradient(135deg, rgba(244, 67, 54, 0.08) 0%, rgba(233, 30, 99, 0.05) 100%);
      border-color: rgba(244, 67, 54, 0.3);
    }

    .ticker-card.crowded:hover {
      border-color: rgba(244, 67, 54, 0.6);
      box-shadow: 0 8px 32px rgba(244, 67, 54, 0.2), 0 0 0 1px rgba(244, 67, 54, 0.4);
    }

    .ticker-card-inner {
      padding: 0.75rem;
    }

    .ticker-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 0.5rem;
    }

    .ticker-main {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      flex: 1;
      min-width: 0;
    }

    .ticker-rank {
      font-size: 1.5rem;
      font-weight: 800;
      color: #00d4ff;
      opacity: 0.4;
      min-width: 32px;
      line-height: 1;
    }

    .ticker-symbol {
      font-size: 1.6rem;
      font-weight: 700;
      color: #fff;
      letter-spacing: -0.5px;
    }

    .ticker-meta {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 0.25rem;
    }

    .score-badge {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(123, 44, 191, 0.2) 100%);
      color: #00d4ff;
      padding: 0.25rem 0.6rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 700;
      border: 1px solid rgba(0, 212, 255, 0.3);
    }

    .conviction-indicator {
      display: flex;
      align-items: center;
      gap: 0.2rem;
      font-size: 0.75rem;
    }

    .conviction-indicator.high { color: #4caf50; }
    .conviction-indicator.medium { color: #ffc107; }
    .conviction-indicator.low { color: #8892b0; }

    .signal-badge {
      font-size: 0.7rem;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-weight: 600;
    }

    .signal-badge.contrarian {
      background: rgba(76, 175, 80, 0.25);
      color: #4caf50;
      border: 1px solid rgba(76, 175, 80, 0.4);
    }

    .signal-badge.crowded {
      background: rgba(244, 67, 54, 0.25);
      color: #f44336;
      border: 1px solid rgba(244, 67, 54, 0.4);
    }

    .ticker-details {
      display: flex;
      gap: 1rem;
      margin: 0.5rem 0;
      padding: 0.5rem 0;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }

    .detail-item {
      display: flex;
      flex-direction: column;
      gap: 0.1rem;
    }

    .detail-label {
      font-size: 0.6rem;
      color: #8892b0;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      font-weight: 500;
    }

    .detail-value {
      font-size: 0.85rem;
      color: #e8e8e8;
      font-weight: 600;
    }

    .hidden-plays {
      margin-top: 0.5rem;
      font-size: 0.8rem;
    }

    .hidden-plays-title {
      font-size: 0.7rem;
      color: #ffc107;
      margin-bottom: 0.3rem;
      font-weight: 600;
    }

    .play-tag {
      display: inline-block;
      background: rgba(255, 193, 7, 0.12);
      border: 1px solid rgba(255, 193, 7, 0.35);
      color: #ffc107;
      padding: 0.15rem 0.5rem;
      border-radius: 4px;
      font-size: 0.7rem;
      margin: 0.1rem;
      font-weight: 500;
      transition: all 0.2s;
    }

    .play-tag:hover {
      background: rgba(255, 193, 7, 0.25);
      transform: scale(1.05);
    }

    /* Expandable Content */
    .ticker-expanded {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
      opacity: 0;
    }

    .ticker-card.active .ticker-expanded {
      max-height: 400px;
      opacity: 1;
    }

    .expanded-content {
      padding: 0.75rem;
      background: rgba(0, 0, 0, 0.2);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .expanded-section {
      margin-bottom: 0.75rem;
    }

    .expanded-section:last-child {
      margin-bottom: 0;
    }

    .expanded-label {
      font-size: 0.65rem;
      color: #8892b0;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      margin-bottom: 0.25rem;
      font-weight: 600;
    }

    .context-text {
      font-size: 0.85rem;
      color: #e8e8e8;
      line-height: 1.5;
      font-style: italic;
    }

    .expanded-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.75rem;
    }

    .action-btn {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(123, 44, 191, 0.15) 100%);
      border: 1px solid rgba(0, 212, 255, 0.3);
      color: #00d4ff;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
      font-weight: 500;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .action-btn:hover {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.25) 0%, rgba(123, 44, 191, 0.25) 100%);
      border-color: rgba(0, 212, 255, 0.5);
      transform: translateY(-1px);
    }

    .action-btn:active {
      transform: translateY(0);
    }

    .action-btn.secondary {
      background: rgba(255, 255, 255, 0.05);
      border-color: rgba(255, 255, 255, 0.2);
      color: #8892b0;
    }

    .action-btn.secondary:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.3);
      color: #e8e8e8;
    }

    .expand-hint {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.3rem;
      font-size: 0.7rem;
      color: #8892b0;
      margin-top: 0.5rem;
      opacity: 0.7;
      transition: opacity 0.2s;
    }

    .ticker-card:hover .expand-hint {
      opacity: 1;
    }

    .expand-icon {
      transition: transform 0.3s ease;
    }

    .ticker-card.active .expand-icon {
      transform: rotate(180deg);
    }

    /* Ripple Effect */
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(0, 212, 255, 0.4);
      transform: scale(0);
      animation: ripple-animation 0.6s ease-out;
      pointer-events: none;
    }

    @keyframes ripple-animation {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }

    /* Title ticker symbols */
    .title-ticker {
      background: rgba(0, 212, 255, 0.15);
      border: 1px solid rgba(0, 212, 255, 0.4);
      color: #00d4ff;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      user-select: none;
    }

    .title-ticker:hover {
      background: rgba(0, 212, 255, 0.25);
      border-color: rgba(0, 212, 255, 0.6);
      transform: scale(1.05);
    }

    .title-ticker.btc {
      background: rgba(247, 147, 26, 0.15);
      border-color: rgba(247, 147, 26, 0.4);
      color: #f7931a;
      font-size: 1.2rem;
      padding: 0.3rem 0.7rem;
    }

    .title-ticker.btc:hover {
      background: rgba(247, 147, 26, 0.25);
      border-color: rgba(247, 147, 26, 0.6);
    }

    .ticker-price {
      font-size: 0.75rem;
      opacity: 0.9;
      margin-left: 0.3rem;
    }

    .ticker-change {
      font-size: 0.7rem;
      padding: 0.1rem 0.3rem;
      border-radius: 3px;
      margin-left: 0.2rem;
    }

    .ticker-change.positive {
      background: rgba(76, 175, 80, 0.2);
      color: #4caf50;
    }

    .ticker-change.negative {
      background: rgba(244, 67, 54, 0.2);
      color: #f44336;
    }

    .chart-btn {
      background: rgba(0, 212, 255, 0.2);
      border: 1px solid #00d4ff;
      color: #00d4ff;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s;
    }

    .chart-btn:hover {
      background: rgba(0, 212, 255, 0.3);
    }

    .chart-btn.btc {
      background: rgba(247, 147, 26, 0.2);
      border-color: #f7931a;
      color: #f7931a;
    }

    .chart-btn.btc:hover {
      background: rgba(247, 147, 26, 0.3);
    }

    /* Chart Modal */
    .chart-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }

    .chart-modal.active {
      display: flex;
    }

    .chart-container {
      background: rgba(26, 26, 46, 0.95);
      border-radius: 16px;
      padding: 2rem;
      width: 100%;
      max-width: 1000px;
      height: 600px;
      position: relative;
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .chart-header h3 {
      color: #00d4ff;
      font-size: 1.5rem;
    }

    .close-btn {
      background: none;
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: #fff;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }

    .close-btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    #chart-image-container {
      height: calc(100% - 60px);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    #chart-image-container img {
      max-width: 100%;
      max-height: 100%;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    }

    /* Podcast Summary Modal */
    .podcast-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1001;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }

    .podcast-modal.active {
      display: flex;
    }

    .podcast-container {
      background: rgba(26, 26, 46, 0.98);
      border-radius: 16px;
      padding: 0;
      width: 100%;
      max-width: 900px;
      max-height: 85vh;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(0, 212, 255, 0.2);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    }

    .podcast-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(123, 44, 191, 0.1) 100%);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .podcast-header h3 {
      color: #00d4ff;
      font-size: 1.3rem;
      margin: 0;
    }

    .podcast-source {
      font-size: 0.8rem;
      color: #8892b0;
      margin-top: 0.25rem;
    }

    .podcast-content {
      padding: 2rem;
      overflow-y: auto;
      max-height: calc(85vh - 80px);
    }

    .podcast-section {
      margin-bottom: 1.5rem;
    }

    .podcast-section:last-child {
      margin-bottom: 0;
    }

    .podcast-section h4 {
      color: #00d4ff;
      font-size: 1rem;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .key-point-box {
      background: rgba(0, 212, 255, 0.08);
      border-left: 3px solid #00d4ff;
      padding: 1rem;
      margin-bottom: 0.75rem;
      border-radius: 0 8px 8px 0;
    }

    .key-point-box.warning {
      background: rgba(244, 67, 54, 0.08);
      border-left-color: #f44336;
    }

    .key-point-box.bullish {
      background: rgba(76, 175, 80, 0.08);
      border-left-color: #4caf50;
    }

    .key-point-box.bitcoin {
      background: rgba(247, 147, 26, 0.08);
      border-left-color: #f7931a;
    }

    .ticker-box-inline {
      display: inline-block;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      padding: 0.5rem 1rem;
      margin: 0.25rem;
      text-align: center;
    }

    .ticker-box-inline .symbol {
      font-weight: 700;
      color: #00d4ff;
    }

    .ticker-box-inline .thesis {
      font-size: 0.75rem;
      color: #8892b0;
      margin-top: 0.25rem;
    }

    .quote-box {
      font-style: italic;
      color: #a8b2d1;
      border-left: 2px solid rgba(255, 255, 255, 0.3);
      padding-left: 1rem;
      margin: 1rem 0;
      line-height: 1.6;
    }

    .implication-box {
      background: rgba(76, 175, 80, 0.1);
      border: 1px solid rgba(76, 175, 80, 0.3);
      border-radius: 8px;
      padding: 1rem;
    }

    .implication-box.bearish {
      background: rgba(244, 67, 54, 0.1);
      border-color: rgba(244, 67, 54, 0.3);
    }

    .implication-box h5 {
      color: #4caf50;
      font-size: 0.85rem;
      margin-bottom: 0.5rem;
    }

    .implication-box.bearish h5 {
      color: #f44336;
    }

    /* Insights Section - Clickable Cards */
    .insight-item {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 10px;
      padding: 0.75rem;
      margin-bottom: 0.75rem;
      border: 1px solid rgba(255, 255, 255, 0.05);
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .insight-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.08) 0%, rgba(123, 44, 191, 0.08) 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .insight-item:hover {
      border-color: rgba(0, 212, 255, 0.3);
      box-shadow: 0 6px 24px rgba(0, 212, 255, 0.1);
      transform: translateY(-2px);
    }

    .insight-item:hover::before {
      opacity: 1;
    }

    .insight-item.active {
      border-color: rgba(0, 212, 255, 0.5);
      box-shadow: 0 8px 32px rgba(0, 212, 255, 0.15);
    }

    .insight-item .source {
      font-size: 0.75rem;
      color: #00d4ff;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }

    .insight-item .text {
      color: #e8e8e8;
      line-height: 1.5;
    }

    .insight-expanded {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, opacity 0.3s ease, padding 0.3s ease;
      opacity: 0;
      padding: 0;
      border-top: 1px solid transparent;
    }

    .insight-item.active .insight-expanded {
      max-height: 200px;
      opacity: 1;
      padding-top: 0.75rem;
      margin-top: 0.75rem;
      border-top-color: rgba(255, 255, 255, 0.1);
    }

    /* Contact Form */
    .contact-card {
      max-width: 600px;
      margin: 1rem auto;
    }

    .contact-form {
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .form-group label {
      color: #00d4ff;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .form-group input,
    .form-group textarea {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      padding: 0.4rem 0.6rem;
      color: #e8e8e8;
      font-size: 0.9rem;
      transition: border-color 0.2s;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #00d4ff;
    }

    .form-group input::placeholder,
    .form-group textarea::placeholder {
      color: #8892b0;
    }

    .form-hint {
      color: #8892b0;
      font-size: 0.8rem;
    }

    .checkbox-group {
      margin-top: 0.5rem;
    }

    .checkbox-label {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      cursor: pointer;
      color: #e8e8e8;
      font-size: 0.95rem;
      line-height: 1.4;
    }

    .checkbox-label input[type="checkbox"] {
      display: none;
    }

    .checkmark {
      width: 20px;
      height: 20px;
      min-width: 20px;
      background: rgba(0, 0, 0, 0.3);
      border: 2px solid rgba(0, 212, 255, 0.4);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      margin-top: 1px;
    }

    .checkbox-label input[type="checkbox"]:checked + .checkmark {
      background: #00d4ff;
      border-color: #00d4ff;
    }

    .checkbox-label input[type="checkbox"]:checked + .checkmark::after {
      content: '‚úì';
      color: #1a1a2e;
      font-size: 14px;
      font-weight: bold;
    }

    .checkbox-text {
      color: #a8b2d1;
    }

    .submit-btn {
      background: linear-gradient(135deg, #00d4ff 0%, #7b2cbf 100%);
      border: none;
      color: #fff;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: opacity 0.2s, transform 0.1s;
    }

    .submit-btn:hover {
      opacity: 0.9;
    }

    .submit-btn:active {
      transform: scale(0.98);
    }

    .submit-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .form-status {
      margin-top: 1rem;
      padding: 1rem;
      border-radius: 8px;
      font-size: 0.95rem;
    }

    .form-status.success {
      background: rgba(76, 175, 80, 0.1);
      border: 1px solid rgba(76, 175, 80, 0.3);
      color: #4caf50;
    }

    .form-status.error {
      background: rgba(244, 67, 54, 0.1);
      border: 1px solid rgba(244, 67, 54, 0.3);
      color: #f44336;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 1rem;
      margin-top: 1rem;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    footer .credit {
      color: #00d4ff;
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }

    footer .subtext {
      color: #8892b0;
      font-size: 0.9rem;
    }

    footer .update-time {
      color: #8892b0;
      font-size: 0.8rem;
      margin-top: 1rem;
    }

    /* Loading State */
    .loading {
      text-align: center;
      padding: 2rem;
      color: #8892b0;
    }

    /* Placeholder */
    .placeholder {
      color: #8892b0;
      font-style: italic;
      text-align: center;
      padding: 2rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <header style="position: relative;">
      <h1>AI, Finance, Tech: Scarcity & Abundance</h1>
      <p class="subtitle">Curated insights from newsletters, podcasts, and market analysis</p>
      <p style="color: #8892b0; font-size: 0.8rem; margin-top: 0.5rem;">
        <span id="last-updated">Last updated: February 14, 2026 at 11:06 AM CST</span> ‚Ä¢
        <span style="color: #00d4ff;">2-week % changes displayed</span>
      </p>
      <!-- Desktop: absolute positioned badges; Mobile: inline via CSS override -->
      <div class="header-qqq-badge" style="position: absolute; bottom: 1rem; left: 2rem; display: flex; gap: 1rem;">
        <span class="title-ticker" onclick="showChart('QQQ')" title="View QQQ 2-week chart">
          QQQ <span id="qqq-price" class="ticker-price"></span> <span id="qqq-change" class="ticker-change"></span>
        </span>
      </div>
      <div class="header-btc-badge" style="position: absolute; bottom: 1rem; right: 2rem; display: flex; gap: 1rem;">
        <span class="title-ticker btc" onclick="showChart('BTC')" title="View Bitcoin 2-week chart">
          <span id="btc-change" class="ticker-change"></span> <span id="btc-price" class="ticker-price"></span> ‚Çø
        </span>
      </div>
    </header>

    <div class="grid">
      <!-- Left Column - Definitions Only -->
      <div class="left-col">
        <!-- Definitions Section -->
        <div class="card">
          <h2>Digital Definitions to Define Directions</h2>

          <div class="definition-item" onclick="toggleDefinition(this)">
            <h3>üõ∞Ô∏è Dyson Swarm</h3>
            <p>A hypothetical megastructure consisting of a vast array of solar collectors (satellites) orbiting a star to capture its energy output. Unlike a solid Dyson Sphere, a swarm allows for gradual construction and doesn't require implausible engineering.</p>
            <div class="definition-expanded">
              <div style="font-size: 0.85rem; color: #00d4ff;">
                <strong>Investment Implication:</strong> As space-based solar power becomes economically viable, companies developing launch capabilities and orbital infrastructure could benefit.
              </div>
            </div>
          </div>

          <div class="definition-item" onclick="toggleDefinition(this)">
            <h3>üìà Jevon's Paradox</h3>
            <p>An economic phenomenon where increased efficiency in using a resource leads to increased consumption of that resource rather than decreased consumption.</p>
            <div class="definition-expanded">
              <div style="font-size: 0.85rem; color: #00d4ff;">
                <strong>Investment Implication:</strong> As AI makes computation cheaper, total compute demand may explode‚Äîbenefiting chip makers, data centers, and power providers despite efficiency gains.
              </div>
            </div>
          </div>

          <div class="definition-item" onclick="toggleDefinition(this)">
            <h3>üí± Yen Carry Trade</h3>
            <p>A strategy where investors borrow in Japanese yen (low interest rates ~0.25%) and invest in higher-yielding assets (US Treasuries, tech stocks, emerging markets).</p>
            <div class="definition-expanded">
              <div style="font-size: 0.85rem; color: #00d4ff;">
                <strong>Risk Signal:</strong> When the Bank of Japan hikes rates or yen strengthens, unwinds trigger forced selling. <strong>2024 unwind</strong> caused 12% VIX spike‚Äîwatch JPY/USD &gt;150.
              </div>
            </div>
          </div>

          <!-- Emerging Terms Box -->
          <div class="suggestions-box">
            <h3>üìã Emerging Terms</h3>
            <p style="color: #a8b2d1; font-size: 0.9rem; margin-bottom: 1rem;">New terminology detected in transcripts. Auto-curated by AI; high-relevance terms promoted to Definitions.</p>

            <div id="suggestions-list">
              <!-- Emerging terms loaded dynamically from database -->
            </div>
            <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
              <p style="color: #8892b0; font-size: 0.75rem; text-align: center;">
                üìä Scored by mention frequency, source diversity, and investment relevance
              </p>
            </div>
          </div>

          <!-- Contact Section -->
          <div class="card contact-card" style="margin-top: 2rem;">
            <h2>üì¨ Get in Touch</h2>
            <p style="color: #8892b0; margin-bottom: 1.5rem; font-size: 0.95rem;">Want to collaborate, share insights, or just say hello? Drop your contact info and we'll reach out.</p>

            <form id="contactForm" class="contact-form">
              <div class="form-group">
                <label for="contactName">Name (optional)</label>
                <input type="text" id="contactName" name="name" placeholder="Your name">
              </div>

              <div class="form-group">
                <label for="contactInfo">Email or Phone <span style="color: #f44336;">*</span></label>
                <input type="text" id="contactInfo" name="contact" placeholder="you@email.com or +1-555-123-4567" required>
                <small class="form-hint">We'll send a verification message to confirm</small>
              </div>

              <div class="form-group">
                <label for="contactMessage">Message (optional)</label>
                <textarea id="contactMessage" name="message" rows="3" placeholder="What brings you here?"></textarea>
              </div>

              <div class="form-group checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="weeklyUpdates" name="weeklyUpdates">
                  <span class="checkmark"></span>
                  <span class="checkbox-text">Send me a once-weekly update of your latest insights</span>
                </label>
              </div>

              <button type="submit" class="submit-btn">
                <span class="btn-text">Send & Verify</span>
                <span class="btn-loading" style="display: none;">Sending...</span>
              </button>
            </form>

            <div id="formStatus" class="form-status" style="display: none;"></div>
          </div>
        </div>
      </div>

      <!-- Middle Column - Insights & Stock Data -->
      <div class="middle-col">
        <!-- Latest Insights -->
        <div class="card">
          <h2>Latest Insights</h2>
          <div id="insights-diagnostic" style="background: #16213e; padding: 10px; margin-bottom: 10px; font-family: monospace; font-size: 12px; display: none;">Waiting for JavaScript...</div>
          <div id="insights-container">
            <!-- Insights loaded dynamically from database -->
          </div>
        </div>

      </div>

      <!-- Right Column - Overton Window & Alpha or Atrophy -->
      <div class="right-col">
        <!-- Overton Window Section -->
        <div class="card">
          <h2>The Overton Window</h2>
          <p style="color: #8892b0; margin-bottom: 1.5rem; font-size: 0.9rem;">Emerging concepts and terminology not yet mainstream in investment discourse</p>

          <div class="overton-item" onclick="toggleOverton(this)">
            <div class="term">üß† Neuralink Moment</div>
            <div class="description">The inflection point when brain-computer interfaces shift from experimental to consumer-ready, triggering societal restructuring around cognitive enhancement.</div>
            <div class="source">Detected in: The Network State Podcast ‚Ä¢ Feb 2026</div>
            <div class="overton-expanded">
              <div style="font-size: 0.85rem; color: #a8b2d1;">
                <strong>Investment Angle:</strong> BCI hardware, neurotech chips, cognitive enhancement platforms. Early stage - watch for FDA approvals and consumer product launches.
              </div>
            </div>
          </div>

          <div class="overton-item" onclick="toggleOverton(this)">
            <div class="term">üåê Sovereign Individual Thesis</div>
            <div class="description">The expectation that high-net-worth individuals will increasingly decouple from traditional jurisdictions, seeking digital-first citizenship and asset structures.</div>
            <div class="source">Detected in: Monetary Matters ‚Ä¢ Feb 2026</div>
            <div class="overton-expanded">
              <div style="font-size: 0.85rem; color: #a8b2d1;">
                <strong>Investment Angle:</strong> Digital banking, crypto custody, tax-advantaged jurisdictions, nomad infrastructure. Services enabling geographic arbitrage.
              </div>
            </div>
          </div>

          <div class="overton-item" onclick="toggleOverton(this)">
            <div class="term">‚ö° Compute Arbitrage</div>
            <div class="description">Exploiting price differentials in AI compute across regions and providers-buying low in unregulated markets, deploying high in enterprise stacks.</div>
            <div class="source">Detected in: a16z Live ‚Ä¢ Jan 2026</div>
            <div class="overton-expanded">
              <div style="font-size: 0.85rem; color: #a8b2d1;">
                <strong>Investment Angle:</strong> GPU cloud providers, distributed compute networks, energy arbitrage plays. Infrastructure for AI training cost optimization.
              </div>
            </div>
          </div>

          <div class="overton-item" onclick="toggleOverton(this)">
            <div class="term">üèõÔ∏è Regulatory Moat</div>
            <div class="description">Competitive advantage gained not through technology but through compliance complexity-incumbents weaponizing bureaucracy against nimble startups.</div>
            <div class="source">Detected in: Jack Mallers Show ‚Ä¢ Feb 2026</div>
            <div class="overton-expanded">
              <div style="font-size: 0.85rem; color: #a8b2d1;">
                <strong>Investment Angle:</strong> Incumbents with established compliance infrastructure. Banking, healthcare, defense contractors. Barrier to entry becomes the product.
              </div>
            </div>
          </div>
        </div>

        <!-- Alpha or Atrophy -->
        <div class="card" style="margin-top: 1.5rem;">
          <h2 style="font-size: 1.3rem;">Alpha or Atrophy</h2>
          <p style="color: #8892b0; margin-bottom: 1rem; font-size: 0.8rem;">Multi-factor scoring: mentions √ó conviction √ó source diversity √ó contrarian signals | <strong>Click for charts</strong></p>
          <div class="stock-grid" id="tickerGrid"></div>
        </div>
      </div>
    </div>

    <!-- Disclaimer -->
    <div class="disclaimer" style="background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 0.75rem; margin: 1rem 0; text-align: center;">
      <p style="color: #8892b0; font-size: 0.8rem; line-height: 1.4; margin: 0;">
        <strong>Disclaimer:</strong> Nothing on this page constitutes investment advice or a recommendation to buy or sell any security.
        All content is for informational and educational purposes only. We may hold positions in some or all of the companies mentioned.
        Past performance is not indicative of future results. Always conduct your own research and consult with a qualified financial advisor before making investment decisions.
      </p>
    </div>

    <footer>
      <div class="credit">ü§ñ Curated by 6AIndolf üßô‚Äç‚ôÇÔ∏è</div>
      <div class="subtext">AI-powered research assistant analyzing newsletters, podcasts, and market signals</div>
      <div class="subtext">
        <a href="archive.html" style="color: #00d4ff; text-decoration: none;">üìö Archive</a> ‚Ä¢ 
        <a href="index.html" style="color: #00d4ff; text-decoration: none;">üè† Dashboard</a>
      </div>
    </footer>
  </div>

  <!-- Chart Modal -->
  <div id="chartModal" class="chart-modal">
    <div class="chart-container">
      <div class="chart-header">
        <h3 id="chartTitle">Stock Chart</h3>
        <button class="close-btn" onclick="closeChart()">‚úï Close</button>
      </div>
      <div id="chart-image-container">
        <img id="chartImage" src="" alt="Stock Chart">
      </div>
    </div>
  </div>

  <!-- Podcast Summary Modal -->
  <div id="podcastModal" class="podcast-modal">
    <div class="podcast-container">
      <div class="podcast-header">
        <div>
          <h3 id="podcastTitle">Podcast Summary</h3>
          <div id="podcastSource" class="podcast-source"></div>
        </div>
        <button class="close-btn" onclick="closePodcastSummary()">‚úï Close</button>
      </div>
      <div id="podcastContent" class="podcast-content">
        <!-- Content populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Deep Dive Modal -->
  <div id="deepDiveModal" class="podcast-modal" style="display: none;">
    <div class="podcast-container" style="max-width: 800px;">
      <div class="podcast-header">
        <div>
          <h3 id="deepDiveTitle">Deep Dive Analysis</h3>
          <div id="deepDiveSource" class="podcast-source"></div>
        </div>
        <button class="close-btn" onclick="closeDeepDive()">‚úï Close</button>
      </div>
      <div id="deepDiveContent" class="podcast-content">
        <!-- Deep dive content populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Load dashboard data from pipeline (if available) -->
  <script src="./data/data.js?v=1772134077"></script>
  
  <script>
    // Load emerging terms from database (AI-curated, no voting)
    function loadSuggestedTerms() {
      const container = document.getElementById('suggestions-list');
      if (!container) return;
      
      // Get suggested terms from dashboardData
      const suggestions = (typeof dashboardData !== 'undefined' && dashboardData.suggestedTerms) 
        ? dashboardData.suggestedTerms 
        : [];
      
      if (suggestions.length === 0) {
        container.innerHTML = '<div style="color: #8892b0; padding: 1rem; text-align: center;">No new terms detected</div>';
        return;
      }
      
      container.innerHTML = suggestions.map(sugg => {
        const term = sugg.term;
        const relevance = sugg.relevance_score || 50;
        const mentions = sugg.mention_count || 1;
        const sources = sugg.source_diversity || 1;
        
        // Relevance indicator color
        let relevanceColor = '#f44336'; // Low
        let relevanceLabel = 'Low';
        if (relevance >= 70) {
          relevanceColor = '#4caf50'; // High
          relevanceLabel = 'High';
        } else if (relevance >= 40) {
          relevanceColor = '#ffc107'; // Medium
          relevanceLabel = 'Medium';
        }
        
        return `
          <div class="suggestion-item" data-term="${term}" style="cursor: pointer;" onclick="toggleDefinition(this)">
            <div class="suggestion-header">
              <span class="word">${term}</span>
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="color: ${relevanceColor}; font-size: 0.75rem; font-weight: 600;">${relevanceLabel}</span>
                <span style="color: #8892b0; font-size: 0.7rem;">üìä ${mentions}</span>
              </div>
            </div>
            <div style="color: #8892b0; font-size: 0.75rem; margin-top: 0.25rem;">
              ${sources} source${sources > 1 ? 's' : ''} ‚Ä¢ ${sugg.source_type || 'auto-detected'}
            </div>
            ${sugg.definition ? `
            <div class="definition-preview" style="display: none; margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
              <div style="color: #a8b2d1; font-size: 0.8rem; font-style: italic;">${sugg.definition}</div>
            </div>` : ''}
          </div>
        `;
      }).join('');
    }
    
    // Toggle definition preview
    function toggleDefinition(element) {
      const preview = element.querySelector('.definition-preview');
      if (preview) {
        preview.style.display = preview.style.display === 'none' ? 'block' : 'none';
      }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      loadSuggestedTerms();
    });

    // Chart modal functions
    function showChart(ticker) {
      const modal = document.getElementById('chartModal');
      const title = document.getElementById('chartTitle');
      const chartImage = document.getElementById('chartImage');

      // Map tickers to chart filenames
      const chartFiles = {
        'GOOGL': 'GOOGL_chart.png',
        'MSFT': 'MSFT_chart.png',
        'AAPL': 'AAPL_chart.png',
        'NVDA': 'NVDA_chart.png',
        'META': 'META_chart.png',
        'BTC': 'BTC_USD_chart.png'
      };

      const chartFile = chartFiles[ticker] || `${ticker}_chart.png`;
      const displayName = ticker === 'BTC' ? 'Bitcoin (BTC-USD)' : ticker;

      title.textContent = `${displayName} - 2 Week Chart`;
      chartImage.src = `charts/${chartFile}`;
      modal.classList.add('active');
    }

    function closeChart() {
      const modal = document.getElementById('chartModal');
      modal.classList.remove('active');
    }

    // Close modal on outside click
    document.getElementById('chartModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeChart();
      }
    });

    // Podcast Summary Data - Loaded from database export or embedded
    let podcastSummaries = {};
    
    // Embedded insight data for Deep Dive modals
    const embeddedInsights = [
      {
        id: 'rundown_spacex_xai',
        title: 'SpaceX/xAI $1.25T Super-Entity',
        source: 'The Rundown AI ‚Ä¢ Feb 13',
        summary: 'Elon Musk consolidating Starlink satellite network with xAI Grok infrastructure creates first vertically integrated AI-to-orbit stack.',
        key_takeaway: 'Vertical integration of AI compute with orbital infrastructure creates durable competitive moats.',
        tickers_mentioned: ['GOOGL', 'NVDA', 'AVGO'],
        sentiment: 'bullish'
      },
      {
        id: 'monetary_matters_gold_top',
        title: 'Gold Climax Top Signal',
        source: 'Monetary Matters ‚Ä¢ Feb 10',
        summary: "Milton Berg institutional model flipped net-short across major indices while retail remains 100% long. Historical pattern suggests 8% drawdown.",
        key_takeaway: 'Risk-off: Reduce momentum exposure. Watch VIX >25.',
        tickers_mentioned: ['VIX', 'SQQQ', 'TLT'],
        sentiment: 'bearish'
      },
      {
        id: 'mallers_bitcoin_hard_asset',
        title: 'Bitcoin as Hard Asset',
        source: 'Jack Mallers Show ‚Ä¢ Feb 3',
        summary: 'New liquidity regime narrative gaining traction - BTC decoupling from tech-correlation as treasury reserve thesis resurfaces.',
        key_takeaway: 'BTC positioning vs DXY weakness, yen carry unwind scenarios.',
        tickers_mentioned: ['BTC', 'COIN', 'MSTR'],
        sentiment: 'bullish'
      },
      {
        id: 'a16z_healthcare_ai',
        title: 'Healthcare AI Moats',
        source: 'a16z Live ‚Ä¢ Jan 25',
        summary: 'Tennr and Camber building operational infrastructure rather than clinical AI. First-mover advantage in regulatory capture.',
        key_takeaway: 'Watch for IPO pipeline in healthtech operations.',
        tickers_mentioned: ['VEEV', 'TDOC', 'DOCS'],
        sentiment: 'bullish'
      },
      {
        id: 'network_state_machine_money',
        title: 'Machine-Native Money',
        source: 'Network State Podcast ‚Ä¢ Jan 16',
        summary: 'USDC co-founder Sean Neville on deterministic crypto meeting probabilistic AI - identity systems for autonomous agents require new financial rails.',
        key_takeaway: 'Long-term: Stablecoin infrastructure (COIN, fintech rails).',
        tickers_mentioned: ['COIN', 'PYPL', 'SQ'],
        sentiment: 'bullish'
      }
    ];
    
    // Initialize podcast summaries from embedded data
    function initPodcastSummaries() {
      embeddedInsights.forEach(insight => {
        podcastSummaries[insight.id] = {
          title: insight.title,
          source: insight.source,
          content: generateInsightHTML(insight)
        };
      });
      console.log('‚úì Initialized podcast summaries from embedded data');
    }
    
    // Generate HTML for insight modal - uses Deep Dive content if available
    function generateInsightHTML(insight) {
      // Try to find matching deep dive by title
      let deepDive = null;
      if (typeof dashboardData !== 'undefined' && dashboardData.deepDives) {
        deepDive = dashboardData.deepDives[String(insight.id)];
      }
      
      if (deepDive) {
        return generateDeepDiveHTML(deepDive);
      }
      
      // Fallback to basic HTML if no Deep Dive content
      const tickerHtml = (insight.tickers_mentioned || []).map(t => 
        `<span style="background: rgba(0,212,255,0.15); color: #00d4ff; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.9rem; margin-right: 0.5rem;">${t}</span>`
      ).join('');
      
      return `
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: #00d4ff; margin-bottom: 0.75rem; font-size: 1.1rem;">üéØ Key Takeaway</h4>
          <p style="color: #e8e8e8; line-height: 1.6; font-size: 1rem;">${insight.key_takeaway}</p>
        </div>
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: #00d4ff; margin-bottom: 0.75rem; font-size: 1.1rem;">üìù Summary</h4>
          <p style="color: #a8b2d1; line-height: 1.6;">${insight.summary}</p>
        </div>
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: #00d4ff; margin-bottom: 0.75rem; font-size: 1.1rem;">üìà Tickers Mentioned</h4>
          <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.5rem;">${tickerHtml}</div>
        </div>
        <div>
          <h4 style="color: #00d4ff; margin-bottom: 0.75rem; font-size: 1.1rem;">üí≠ Sentiment</h4>
          <span style="${insight.sentiment === 'bullish' ? 'color: #4caf50;' : insight.sentiment === 'bearish' ? 'color: #f44336;' : 'color: #ffc107;'} font-weight: 600; font-size: 1rem;">${(insight.sentiment || 'neutral').toUpperCase()}</span>
        </div>
      `;
    }
    
    // Generate full Deep Dive HTML with all sections
    function generateDeepDiveHTML(dd) {
      const sections = [];
      
      // Overview
      if (dd.overview) {
        sections.push(`
          <div style="margin-bottom: 2rem; padding: 1.25rem; background: rgba(0,212,255,0.05); border-left: 3px solid #00d4ff; border-radius: 8px;">
            <h4 style="color: #00d4ff; margin-bottom: 0.75rem; font-size: 1.1rem;">üìã Overview</h4>
            <p style="color: #e8e8e8; line-height: 1.7; font-size: 0.95rem;">${dd.overview}</p>
          </div>
        `);
      }
      
      // Key Takeaways (detailed)
      if (dd.key_takeaways_detailed && dd.key_takeaways_detailed.length > 0) {
        const takeawaysHtml = dd.key_takeaways_detailed.map(t => 
          `<li style="margin-bottom: 0.5rem; line-height: 1.6; color: #e8e8e8;">${t}</li>`
        ).join('');
        sections.push(`
          <div style="margin-bottom: 2rem;">
            <h4 style="color: #00d4ff; margin-bottom: 0.75rem; font-size: 1.1rem;">üéØ Key Takeaways</h4>
            <ul style="padding-left: 1.5rem; margin: 0;">${takeawaysHtml}</ul>
          </div>
        `);
      }
      
      // Investment Thesis
      if (dd.investment_thesis) {
        sections.push(`
          <div style="margin-bottom: 2rem;">
            <h4 style="color: #00d4ff; margin-bottom: 0.75rem; font-size: 1.1rem;">üí° Investment Thesis</h4>
            <p style="color: #a8b2d1; line-height: 1.7; font-size: 0.95rem;">${dd.investment_thesis}</p>
          </div>
        `);
      }
      
      // Ticker Analysis
      if (dd.ticker_analysis && Object.keys(dd.ticker_analysis).length > 0) {
        const tickersHtml = Object.entries(dd.ticker_analysis).map(([ticker, analysis]) => `
          <div style="margin-bottom: 1rem; padding: 1rem; background: rgba(255,255,255,0.03); border-radius: 8px;">
            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
              <span style="background: rgba(0,212,255,0.2); color: #00d4ff; padding: 0.25rem 0.75rem; border-radius: 4px; font-weight: 600; font-size: 0.9rem;">${ticker}</span>
            </div>
            <p style="color: #e8e8e8; line-height: 1.5; margin-bottom: 0.5rem; font-size: 0.9rem;"><strong style="color: #00d4ff;">Rationale:</strong> ${analysis.rationale || 'N/A'}</p>
            <p style="color: #a8b2d1; line-height: 1.5; margin-bottom: 0.5rem; font-size: 0.9rem;"><strong>Positioning:</strong> ${analysis.positioning || 'N/A'}</p>
            <p style="color: #f44336; line-height: 1.5; font-size: 0.85rem;"><strong>Risk:</strong> ${analysis.risk || 'N/A'}</p>
          </div>
        `).join('');
        sections.push(`
          <div style="margin-bottom: 2rem;">
            <h4 style="color: #00d4ff; margin-bottom: 0.75rem; font-size: 1.1rem;">üìà Ticker Analysis</h4>
            ${tickersHtml}
          </div>
        `);
      }
      
      // Positioning Guidance
      if (dd.positioning_guidance) {
        sections.push(`
          <div style="margin-bottom: 2rem; padding: 1.25rem; background: rgba(76,175,80,0.05); border: 1px solid rgba(76,175,80,0.2); border-radius: 8px;">
            <h4 style="color: #4caf50; margin-bottom: 0.75rem; font-size: 1.1rem;">üéØ Positioning Guidance</h4>
            <p style="color: #e8e8e8; line-height: 1.7; font-size: 0.95rem;">${dd.positioning_guidance}</p>
          </div>
        `);
      }
      
      // Risk Factors
      if (dd.risk_factors && dd.risk_factors.length > 0) {
        const risksHtml = dd.risk_factors.map(r => 
          `<li style="margin-bottom: 0.5rem; line-height: 1.6; color: #f44336;">${r}</li>`
        ).join('');
        sections.push(`
          <div style="margin-bottom: 2rem;">
            <h4 style="color: #f44336; margin-bottom: 0.75rem; font-size: 1.1rem;">‚ö†Ô∏è Risk Factors</h4>
            <ul style="padding-left: 1.5rem; margin: 0;">${risksHtml}</ul>
          </div>
        `);
      }
      
      // Catalysts
      if (dd.catalysts && dd.catalysts.length > 0) {
        const catalystsHtml = dd.catalysts.map(c => 
          `<li style="margin-bottom: 0.5rem; line-height: 1.6; color: #ffc107;">${c}</li>`
        ).join('');
        sections.push(`
          <div style="margin-bottom: 2rem;">
            <h4 style="color: #ffc107; margin-bottom: 0.75rem; font-size: 1.1rem;">üìÖ Catalysts & Timeline</h4>
            <ul style="padding-left: 1.5rem; margin: 0;">${catalystsHtml}</ul>
          </div>
        `);
      }
      
      return sections.join('');
    }
    
    // Load insights dynamically from database
    function loadInsights() {
      console.log('loadInsights() called');
      const container = document.getElementById('insights-container');
      const diag = document.getElementById('insights-diagnostic');

      if (!container) {
        console.log('insights-container not found');
        if (diag) diag.innerHTML = '<strong style="color:#ff6b6b">ERROR: insights-container not found</strong>';
        return;
      }

      if (diag) diag.innerHTML = '<strong>‚úì JavaScript running...</strong><br>';

      // Build diagnostic output
      let diagHtml = '<strong>üîç Diagnostic:</strong><br>';
      
      // Debug logging
      const ddExists = typeof dashboardData !== 'undefined';
      console.log('dashboardData exists:', ddExists);
      diagHtml += `dashboardData exists: ${ddExists}<br>`;
      
      if (ddExists) {
        const keys = Object.keys(dashboardData);
        console.log('dashboardData keys:', keys);
        diagHtml += `keys: ${keys.join(', ')}<br>`;
        
        const mcExists = !!dashboardData.mainContent;
        console.log('mainContent exists:', mcExists);
        diagHtml += `mainContent exists: ${mcExists}<br>`;
        
        if (mcExists) {
          const mcKeys = Object.keys(dashboardData.mainContent);
          console.log('mainContent keys:', mcKeys);
          diagHtml += `mainContent keys: ${mcKeys.join(', ')}<br>`;
          
          const insExists = !!dashboardData.mainContent.insights;
          console.log('insights array exists:', insExists);
          diagHtml += `insights exists: ${insExists}<br>`;
          
          if (insExists) {
            const count = dashboardData.mainContent.insights.length;
            console.log('insights count:', count);
            diagHtml += `insights count: ${count}<br>`;
            
            // Check display_on_main values
            const insights = dashboardData.mainContent.insights;
            const onMain = insights.filter(i => i.display_on_main === 1);
            diagHtml += `with display_on_main=1: ${onMain.length}<br>`;
            diagHtml += `IDs: ${insights.map(i => i.id + ':' + i.display_on_main).join(', ')}<br>`;
          }
        }
      }
      
      if (diag) diag.innerHTML = diagHtml;
      
      // Get insights from dashboardData.mainContent (correctly ordered, pre-filtered)
      let insights = [];
      if (typeof dashboardData !== 'undefined' && dashboardData.mainContent && dashboardData.mainContent.insights) {
        insights = dashboardData.mainContent.insights.filter(i => i.display_on_main === 1);
        console.log('After filter, insights count:', insights.length);
        
        // Sort by source_date DESC (newest episode date at top)
        insights.sort((a, b) => {
          const dateA = new Date(a.source_date || a.added_date);
          const dateB = new Date(b.source_date || b.added_date);
          return dateB - dateA;
        });
        
        // Limit to most recent 8 insights on main page
        insights = insights.slice(0, 8);
      }
      
      diagHtml += `<hr><strong>After filter:</strong> ${insights.length} insights<br>`;
      
      if (insights.length === 0) {
        console.log('No insights to display');
        diagHtml += '<strong style="color:#ff6b6b">ERROR: insights.length is 0 after filter</strong>';
        if (diag) diag.innerHTML = diagHtml;
        if (typeof dashboardData === 'undefined') {
          container.innerHTML = '<div class="placeholder" style="color: #ff6b6b;">Error: dashboardData not loaded. Check console.</div>';
        } else if (!dashboardData.mainContent) {
          container.innerHTML = '<div class="placeholder" style="color: #ff6b6b;">Error: mainContent missing. Check console.</div>';
        } else if (!dashboardData.mainContent.insights) {
          container.innerHTML = '<div class="placeholder" style="color: #ff6b6b;">Error: insights array missing. Check console.</div>';
        } else {
          container.innerHTML = '<div class="placeholder">No insights available</div>';
        }
        return;
      }
      
      diagHtml += `<strong style="color:#4caf50">Rendering ${insights.length} insights...</strong><br>`;
      if (diag) diag.innerHTML = diagHtml;
      console.log('Rendering', insights.length, 'insights');
      
      // Render insights with Deep Dive buttons
      let html = '';
      for (const insight of insights) {
        const dateStr = new Date(insight.source_date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        // Parse tickers ‚Äî handle array, JSON string, or plain string
        let tickerArr = insight.tickers_mentioned;
        if (typeof tickerArr === 'string') {
          try { tickerArr = JSON.parse(tickerArr); } catch(e) { tickerArr = tickerArr ? [tickerArr] : []; }
        }
        if (!Array.isArray(tickerArr)) tickerArr = [];
        const tickerDisplay = tickerArr.length > 0 ? tickerArr.join(' ¬∑ ') : 'None';

        const sentimentColor = insight.sentiment === 'bullish' ? '#4caf50' : insight.sentiment === 'bearish' ? '#f44336' : '#ffc107';
        
        // Check for deep dive
        const hasDeepDive = typeof dashboardData !== 'undefined' && dashboardData.deepDives && 
          !!dashboardData.deepDives[String(insight.id)];
        const deepDiveBtn = hasDeepDive ? 
          '<button onclick="event.stopPropagation(); showDeepDiveModal(' + insight.id + ')" style="background: linear-gradient(90deg, #00d4ff, #7b2cbf); color: white; border: none; padding: 0.4rem 0.9rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; white-space: nowrap;">üîç Deep Dive</button>' : '';
        
        html += '<div class="insight-item" onclick="toggleInsight(this)">';
        html += '<div class="source">' + insight.source_name + ' ‚Ä¢ ' + dateStr + '</div>';
        html += '<div class="text"><strong>' + insight.title + ':</strong> ' + insight.summary + ' <span style="color:' + sentimentColor + ';">‚Üí ' + (insight.key_takeaway || '') + '</span></div>';
        html += '<div class="insight-expanded"><div style="font-size: 0.85rem; color: #a8b2d1; display: flex; justify-content: space-between; align-items: flex-end; gap: 0.5rem;">';
        html += '<span><strong>Key Tickers:</strong> ' + tickerDisplay + '</span>' + deepDiveBtn;
        html += '</div></div></div>';
      }
      container.innerHTML = html;
      if (diag) diag.innerHTML = '<strong style="color:#4caf50">‚úì ' + insights.length + ' insights loaded</strong>';
    }

    // Load podcast data from external source (kept for future database integration)
    async function loadPodcastData() {
      // Always initialize from embedded data first
      initPodcastSummaries();
      
      try {
        // Try to load additional data from data.js if available
        if (typeof dashboardData !== 'undefined' && dashboardData.podcastSummaries) {
          const additional = formatPodcastData(dashboardData.podcastSummaries);
          podcastSummaries = { ...podcastSummaries, ...additional };
          console.log('‚úì Loaded additional podcast data from dashboardData');
        }
      } catch (error) {
        console.log('Note: No additional podcast data available');
      }
    }
    
    // Format database podcast data to match expected structure
    function formatPodcastData(data) {
      const formatted = {};
      data.forEach(episode => {
        const id = episode.podcast_name.toLowerCase().replace(/[^a-z0-9]/g, '_') + '_' + 
                   episode.episode_title.toLowerCase().replace(/[^a-z0-9]/g, '_').substring(0, 20);
        
        formatted[id] = {
          title: episode.episode_title,
          source: `${episode.podcast_name} ‚Ä¢ ${new Date(episode.episode_date).toLocaleDateString()}`,
          content: episode.summary || generateDefaultSummary(episode)
        };
      });
      return formatted;
    }
    
    // Generate default summary if none provided
    function generateDefaultSummary(episode) {
      const tickers = episode.key_tickers || [];
      const tickerHtml = tickers.map(t => 
        `<span class="ticker-box-inline"><span class="symbol">${t}</span></span>`
      ).join('');
      
      return `
        <div class="podcast-section">
          <h4>üéØ Key Takeaways</h4>
          ${(episode.key_takeaways || []).map(takeaway => 
            `<div class="key-point-box">${takeaway}</div>`
          ).join('')}
        </div>
        <div class="podcast-section">
          <h4>üìà Investment Implications</h4>
          <div style="margin-top: 0.5rem;">${tickerHtml}</div>
        </div>
        <div class="podcast-section">
          <h4>üé≤ Positioning</h4>
          <div class="implication-box">
            <p style="color: #a8b2d1; font-size: 0.9rem;">${episode.investment_thesis || 'No thesis available.'}</p>
          </div>
        </div>
      `;
    }
    
    // Fallback default data (used when database export not available)
    function loadDefaultPodcastData() {
      podcastSummaries = {};
      console.log('Loaded default (empty) podcast data');
    }

    // Show podcast summary modal
    function showPodcastSummary(podcastId) {
      const modal = document.getElementById('podcastModal');
      const title = document.getElementById('podcastTitle');
      const source = document.getElementById('podcastSource');
      const content = document.getElementById('podcastContent');

      const data = podcastSummaries[podcastId];
      if (!data) {
        console.error('Podcast summary not found:', podcastId);
        return;
      }

      title.textContent = data.title;
      source.textContent = data.source;
      content.innerHTML = data.content;

      modal.classList.add('active');
    }

    // Close podcast summary modal
    function closePodcastSummary() {
      const modal = document.getElementById('podcastModal');
      modal.classList.remove('active');
    }

    // Close podcast modal on outside click
    document.getElementById('podcastModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closePodcastSummary();
      }
    });

    // Show Deep Dive modal with full analysis
    function showDeepDiveModal(insightId) {
      const modal = document.getElementById('deepDiveModal');
      const title = document.getElementById('deepDiveTitle');
      const source = document.getElementById('deepDiveSource');
      const content = document.getElementById('deepDiveContent');
      
      // Look up deep dive by numeric insight id
      const deepDive = (typeof dashboardData !== 'undefined' && dashboardData.deepDives)
        ? dashboardData.deepDives[String(insightId)]
        : null;
        
      if (deepDive) {
        title.textContent = deepDive.insight_title || 'Deep Dive Analysis';
        source.textContent = deepDive.source_name ? `${deepDive.source_name} ‚Ä¢ Deep Dive` : 'AI-Powered Analysis';
        content.innerHTML = generateDeepDiveHTML(deepDive);
        modal.style.display = 'flex';
        modal.classList.add('active');
        return;
      }
      
      // Fallback if no deep dive found
      title.textContent = 'Deep Dive';
      source.textContent = 'Analysis';
      content.innerHTML = '<div style="padding: 2rem; text-align: center; color: #8892b0;">Deep dive content not available for this insight.</div>';
      modal.style.display = 'flex';
      modal.classList.add('active');
    }

    // Close Deep Dive modal
    function closeDeepDive() {
      const modal = document.getElementById('deepDiveModal');
      modal.classList.remove('active');
      setTimeout(() => { modal.style.display = 'none'; }, 300);
    }

    // Close deep dive modal on outside click
    document.getElementById('deepDiveModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeDeepDive();
      }
    });

    // Close modal on Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeChart();
        closePodcastSummary();
        // Also close any expanded cards
        document.querySelectorAll('.ticker-card.active, .insight-item.active, .overton-item.active').forEach(card => {
          card.classList.remove('active');
        });
        activeCard = null;
      }
    });

    // Toggle insight cards
    function toggleInsight(item) {
      // Close other expanded items
      document.querySelectorAll('.insight-item.active').forEach(el => {
        if (el !== item) el.classList.remove('active');
      });
      item.classList.toggle('active');
    }

    // Toggle overton window items
    function toggleOverton(item) {
      // Close other expanded items
      document.querySelectorAll('.overton-item.active').forEach(el => {
        if (el !== item) el.classList.remove('active');
      });
      item.classList.toggle('active');
    }

    // Toggle definition items
    function toggleDefinition(item) {
      // Close other expanded items
      document.querySelectorAll('.definition-item.active').forEach(el => {
        if (el !== item) el.classList.remove('active');
      });
      item.classList.toggle('active');
    }

    // Close expanded cards when clicking outside
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.ticker-card') && !e.target.closest('.insight-item') && !e.target.closest('.overton-item') && !e.target.closest('.definition-item')) {
        document.querySelectorAll('.ticker-card.active, .insight-item.active, .overton-item.active, .definition-item.active').forEach(card => {
          card.classList.remove('active');
        });
        activeCard = null;
      }
    });

    // Auto-refresh data every 5 minutes
    setInterval(() => {
      console.log('Checking for updated data...');
      // In production, this would fetch updated JSON data from the pipeline
    }, 300000);

    // Price data - loaded from price_data.json
    let priceData = {};

    async function loadPriceData() {
      try {
        const response = await fetch('./price_data.json?v=' + Date.now());
        if (response.ok) {
          priceData = await response.json();
          // Remove metadata key if present
          delete priceData._metadata;
          console.log('Loaded price data:', Object.keys(priceData).length, 'tickers');
        } else {
          console.log('Failed to load price data, using empty object');
          priceData = {};
        }
      } catch (error) {
        console.log('Error loading price data:', error);
        priceData = {};
      }
      updateTitleTickers();
      populateTickers();
    }

    // Update title tickers with price data
    function updateTitleTickers() {
      // QQQ: symbol price change
      if (priceData['QQQ']) {
        const qqq = priceData['QQQ'];
        document.getElementById('qqq-price').textContent = `$${qqq.price.toFixed(2)}`;
        const changeEl = document.getElementById('qqq-change');
        changeEl.textContent = `${qqq.change_pct >= 0 ? '+' : ''}${qqq.change_pct.toFixed(1)}%`;
        changeEl.className = 'ticker-change ' + (qqq.change_pct >= 0 ? 'positive' : 'negative');
      }

      // BTC: change price symbol (check both BTC and BTC-USD keys)
      const btcKey = priceData['BTC'] ? 'BTC' : 'BTC-USD';
      if (priceData[btcKey]) {
        const btc = priceData[btcKey];
        document.getElementById('btc-price').textContent = `$${btc.price.toLocaleString('en-US', {maximumFractionDigits: 0})}`;
        const changeEl = document.getElementById('btc-change');
        changeEl.textContent = `${btc.change_pct >= 0 ? '+' : ''}${btc.change_pct.toFixed(1)}%`;
        changeEl.className = 'ticker-change ' + (btc.change_pct >= 0 ? 'positive' : 'negative');
      }
    }

    // Ticker data - loaded from database export
    let enhancedTickers = [];

    // Load ticker data from database export
    async function loadTickerData() {
      try {
        // Try dashboardData first
        if (typeof dashboardData !== 'undefined' && dashboardData.tickerScores) {
          enhancedTickers = dashboardData.tickerScores.map(formatTickerData);
          console.log('Loaded ticker data from dashboardData:', enhancedTickers.length);
          populateTickers();
          return;
        }

        // Fallback: fetch from JSON
        const response = await fetch('./data/ticker_scores.json');
        if (response.ok) {
          const data = await response.json();
          enhancedTickers = data.map(formatTickerData);
          console.log('Loaded ticker data from JSON:', enhancedTickers.length);
          populateTickers();
        } else {
          console.log('No external ticker data found, using defaults');
          loadDefaultTickerData();
        }
      } catch (error) {
        console.log('Error loading ticker data:', error);
        loadDefaultTickerData();
      }
    }

    // Format database ticker data to match expected structure
    function formatTickerData(score) {
      return {
        ticker: score.ticker,
        score: Math.round(score.total_score || score.score),
        rank: score.rank || 0,
        mentions: score.raw_mention_count || score.podcast_mentions + score.newsletter_mentions || 1,
        uniqueSources: score.unique_sources || 1,
        convictionLevel: score.conviction_level || 'medium',
        contrarianSignal: score.contrarian_signal || 'neutral',
        timeframe: score.timeframe || 'long_term',
        hiddenPlays: score.hidden_plays || [],
        latestContext: score.contexts && score.contexts[0] ? score.contexts[0].preview : 'No context available',
        contexts: score.contexts || []
      };
    }

    // Fallback default ticker data
    function loadDefaultTickerData() {
      enhancedTickers = [
        {
          ticker: 'GOOGL',
          score: 115,
          rank: 1,
          mentions: 6,
          uniqueSources: 2,
          convictionLevel: 'medium',
          contrarianSignal: 'neutral',
          timeframe: 'long_term',
          hiddenPlays: [
            { category: 'Cloud Infrastructure', tickers: ['ANET', 'FFIV', 'NET'] },
            { category: 'AI Training', tickers: ['SNOW', 'PLTR'] }
          ],
          latestContext: 'SpaceX/xAI $1.25T super-entity signals defensive moat importance'
        },
        {
          ticker: 'NVDA',
          score: 88,
          rank: 3,
          mentions: 3,
          uniqueSources: 2,
          convictionLevel: 'high',
          contrarianSignal: 'crowded_warning',
          timeframe: 'long_term',
          hiddenPlays: [
            { category: 'Power', tickers: ['NEE', 'CEG', 'VST'] },
            { category: 'Networking', tickers: ['ANET', 'AVGO', 'MRVL'] }
          ],
          latestContext: 'Google upgrade breaks reasoning barriers - continued compute demand'
        }
      ];
      populateTickers();
    }

    // Update last updated timestamp from data
    function updateLastUpdated() {
      const lastUpdatedEl = document.getElementById('last-updated');
      if (lastUpdatedEl && typeof dashboardData !== 'undefined' && dashboardData.generatedAt) {
        const date = new Date(dashboardData.generatedAt);
        const options = { 
          month: 'long', 
          day: 'numeric', 
          year: 'numeric',
          hour: 'numeric',
          minute: '2-digit',
          timeZoneName: 'short'
        };
        lastUpdatedEl.textContent = 'Last updated: ' + date.toLocaleString('en-US', options);
      }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', async function() {
      console.log('Page loading...');
      updateLastUpdated();
      await loadPriceData();  // Load prices first (also calls updateTitleTickers and populateTickers)
      loadTickerData();
      loadInsights();  // Load insights dynamically from database
      loadPodcastData();
    });

    // Track active card
    let activeCard = null;

    // Populate enhanced ticker cards
    function populateTickers() {
      const grid = document.getElementById('tickerGrid');
      if (!grid) return;

      if (enhancedTickers.length === 0) {
        grid.innerHTML = '<div class="placeholder">Loading tickers...</div>';
        return;
      }

      // Sort by score and take top 10
      const top10 = enhancedTickers
        .sort((a, b) => b.score - a.score)
        .slice(0, 10);

      // Create main ticker cards (top 10 only)
      let html = top10.map((ticker, index) => createTickerCard(ticker, index + 1)).join('');

      grid.innerHTML = html;

      // Add click handlers to cards
      document.querySelectorAll('.ticker-card').forEach(card => {
        card.addEventListener('click', handleCardClick);
      });

    }

    // Handle card click with ripple effect
    function handleCardClick(e) {
      const card = e.currentTarget;

      // Don't toggle if clicking on action buttons
      if (e.target.closest('.action-btn')) {
        return;
      }

      // Create ripple effect
      const rect = card.getBoundingClientRect();
      const ripple = document.createElement('span');
      const size = Math.max(rect.width, rect.height);
      const x = e.clientX - rect.left - size / 2;
      const y = e.clientY - rect.top - size / 2;

      ripple.style.width = ripple.style.height = size + 'px';
      ripple.style.left = x + 'px';
      ripple.style.top = y + 'px';
      ripple.classList.add('ripple');

      card.appendChild(ripple);

      setTimeout(() => ripple.remove(), 600);

      // Toggle active state
      if (activeCard && activeCard !== card) {
        activeCard.classList.remove('active');
      }

      card.classList.toggle('active');
      activeCard = card.classList.contains('active') ? card : null;
    }

    // Show deep dive modal (placeholder for future implementation)
    function showDeepDive(ticker) {
      // For now, just show an alert - in production this would open a detailed view
      const modal = document.getElementById('chartModal');
      const title = document.getElementById('chartTitle');
      const chartImage = document.getElementById('chartImage');

      title.textContent = `${ticker} - Deep Dive Analysis`;
      chartImage.src = `charts/${ticker}_chart.png`;
      chartImage.onerror = function() {
        // If no chart exists, show placeholder
        this.src = '';
        this.style.display = 'none';
        document.getElementById('chart-image-container').innerHTML = `
          <div style="text-align: center; color: #8892b0; padding: 3rem;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">üîç</div>
            <div style="font-size: 1.2rem; margin-bottom: 0.5rem;">Deep Dive for ${ticker}</div>
            <div style="font-size: 0.9rem;">Detailed analysis coming soon!</div>
            <div style="margin-top: 1.5rem; font-size: 0.8rem; opacity: 0.7;">
              Research reports, financial metrics, and AI-powered insights will be available here.
            </div>
          </div>
        `;
      };
      chartImage.onload = function() {
        this.style.display = 'block';
      };
      modal.classList.add('active');
    }

    function createTickerCard(ticker, rank) {
      const convictionEmoji = {
        'high': 'üî• High',
        'medium': '‚ö° Medium',
        'low': '‚ó¶ Low'
      };

      // Handle data structure differences
      const tickerSymbol = ticker.ticker || 'UNKNOWN';
      const tickerScore = Math.round(ticker.score || 0);
      const tickerMentions = ticker.mentions || 0;
      const tickerSources = ticker.unique_sources || ticker.uniqueSources || 1;
      const tickerConviction = ticker.conviction_level || ticker.convictionLevel || 'medium';
      const tickerSignal = ticker.contrarian_signal || ticker.contrarianSignal || 'neutral';
      const tickerTimeframe = ticker.timeframe || 'unspecified';
      const tickerHiddenPlays = ticker.hidden_plays || ticker.hiddenPlays || [];
      const contexts = ticker.contexts || [];
      const latestContext = contexts.length > 0 ? (contexts[0].subject || contexts[0].preview || '') : '';

      // Get price data if available (handle BTC -> BTC-USD mapping)
      let priceLookupKey = tickerSymbol;
      if (tickerSymbol === 'BTC' && !priceData['BTC'] && priceData['BTC-USD']) {
        priceLookupKey = 'BTC-USD';
      }
      const priceInfo = priceData[priceLookupKey] || {};
      const price = priceInfo.price;
      const changePct = priceInfo.change_pct;
      const hasPrice = price !== undefined && changePct !== undefined;

      const cardClass = tickerSignal === 'contrarian_positive' ? 'contrarian' :
                        tickerSignal === 'crowded_warning' ? 'crowded' : '';

      const signalBadge = tickerSignal === 'contrarian_positive' ?
        '<span class="signal-badge contrarian">üéØ Contrarian</span>' :
        tickerSignal === 'crowded_warning' ?
        '<span class="signal-badge crowded">‚ö†Ô∏è Crowded</span>' : '';

      // Hidden plays for collapsed view
      const hiddenPlaysCollapsed = tickerHiddenPlays.length > 0 ? `
        <div class="hidden-plays">
          <span class="hidden-plays-title">üíé Hidden Plays:</span>
          ${tickerHiddenPlays.slice(0, 2).map(play => {
            const tickers = play.tickers || [];
            return tickers.slice(0, 3).map(t => `<span class="play-tag">${t}</span>`).join('');
          }).join('')}
        </div>
      ` : '';

      // Hidden plays for expanded view
      const hiddenPlaysExpanded = tickerHiddenPlays.length > 0 ? `
        <div class="expanded-section">
          <div class="expanded-label">üíé Hidden Plays & Second-Order Effects</div>
          ${tickerHiddenPlays.map(play => `
            <div style="margin-bottom: 0.5rem;">
              <div style="font-size: 0.75rem; color: #ffc107; margin-bottom: 0.25rem;">${play.category}</div>
              <div>${play.tickers.map(t => `<span class="play-tag">${t}</span>`).join('')}</div>
            </div>
          `).join('')}
        </div>
      ` : '';

      const timeframeEmoji = tickerTimeframe === 'long_term' ? 'üìÖ Long' :
                             tickerTimeframe === 'short_term' ? '‚ö° Short' : '‚è±Ô∏è Unspec';

      // Price display HTML
      const priceHtmlRight = hasPrice ? `
        <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.15rem;">
          <span style="font-size: 0.9rem; color: #e8e8e8; font-weight: 700;">$${price < 1000 ? price.toFixed(2) : price.toLocaleString('en-US', {maximumFractionDigits: 0})}</span>
          <span class="ticker-change ${changePct >= 0 ? 'positive' : 'negative'}" style="font-size: 0.7rem; padding: 0.15rem 0.4rem; font-weight: 600;">${changePct >= 0 ? '+' : ''}${changePct.toFixed(1)}%</span>
        </div>
      ` : '';

      // Context preview for collapsed view
      const contextPreview = latestContext ?
        `<div style="font-size: 0.75rem; color: #8892b0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 0.2rem; max-width: 200px;">${latestContext.substring(0, 50)}...</div>` : '';

      // Full context for expanded view
      const contextExpanded = latestContext ? `
        <div class="expanded-section">
          <div class="expanded-label">üìù Latest Context</div>
          <div class="context-text">"${latestContext}"</div>
        </div>
      ` : '';

      return `
        <div class="ticker-card ${cardClass}" data-ticker="${tickerSymbol}">
          <div class="ticker-card-inner">
            <div class="ticker-header">
              <div class="ticker-main">
                <div class="ticker-rank">#${rank}</div>
                <div style="min-width: 0; flex: 1;">
                  <div class="ticker-symbol">${tickerSymbol}</div>
                  ${contextPreview}
                </div>
              </div>
              <div class="ticker-meta">
                ${priceHtmlRight}
                <span class="score-badge">${tickerScore}</span>
                ${signalBadge}
              </div>
            </div>

            <div class="ticker-details">
              <div class="detail-item">
                <span class="detail-label">Mentions</span>
                <span class="detail-value">${tickerMentions}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Sources</span>
                <span class="detail-value">${tickerSources}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Conviction</span>
                <span class="detail-value conviction-indicator ${tickerConviction}">
                  ${convictionEmoji[tickerConviction] || '‚ó¶ Low'}
                </span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Timeframe</span>
                <span class="detail-value">${timeframeEmoji}</span>
              </div>
            </div>

            ${hiddenPlaysCollapsed}

            <div class="expand-hint">
              <span>Click to expand details</span>
              <span class="expand-icon">‚ñº</span>
            </div>
          </div>

          <div class="ticker-expanded">
            <div class="expanded-content">
              ${contextExpanded}
              ${hiddenPlaysExpanded}

              <div class="expanded-section">
                <div class="expanded-label">üìä Quick Stats</div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; font-size: 0.8rem;">
                  <div style="background: rgba(0,0,0,0.2); padding: 0.5rem; border-radius: 6px;">
                    <div style="color: #8892b0; font-size: 0.7rem;">Score Breakdown</div>
                    <div style="color: #e8e8e8;">Base: ${tickerMentions * 10} √ó Diversity: ${tickerSources > 2 ? '2x' : tickerSources > 1 ? '1.5x' : '1x'}</div>
                  </div>
                  <div style="background: rgba(0,0,0,0.2); padding: 0.5rem; border-radius: 6px;">
                    <div style="color: #8892b0; font-size: 0.7rem;">Signal Type</div>
                    <div style="color: ${tickerSignal === 'contrarian_positive' ? '#4caf50' : tickerSignal === 'crowded_warning' ? '#f44336' : '#00d4ff'};">
                      ${tickerSignal === 'contrarian_positive' ? 'Contrarian Positive' : tickerSignal === 'crowded_warning' ? 'Crowded Warning' : 'Standard Mention'}
                    </div>
                  </div>
                </div>
              </div>

              <div class="expanded-actions">
                <button class="action-btn" onclick="event.stopPropagation(); showChart('${tickerSymbol}')">
                  üìä View Chart
                </button>
                <button class="action-btn secondary" onclick="event.stopPropagation(); window.open('https://finance.yahoo.com/quote/${tickerSymbol}', '_blank')">
                  ‚ÜóÔ∏è Yahoo Finance
                </button>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // Contact Form Handler
    document.getElementById('contactForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const submitBtn = this.querySelector('.submit-btn');
      const btnText = submitBtn.querySelector('.btn-text');
      const btnLoading = submitBtn.querySelector('.btn-loading');
      const statusDiv = document.getElementById('formStatus');

      // Get form data
      const name = document.getElementById('contactName').value.trim();
      const contact = document.getElementById('contactInfo').value.trim();
      const message = document.getElementById('contactMessage').value.trim();
      const wantsWeekly = document.getElementById('weeklyUpdates').checked;

      // Validate contact info
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      const phoneRegex = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/;

      const isEmail = emailRegex.test(contact);
      const isPhone = phoneRegex.test(contact.replace(/\s/g, ''));

      if (!isEmail && !isPhone) {
        showStatus('Please enter a valid email address or phone number (e.g., you@email.com or +1-555-123-4567)', 'error');
        return;
      }

      // Show loading state
      submitBtn.disabled = true;
      btnText.style.display = 'none';
      btnLoading.style.display = 'inline';

      try {
        // Store submission locally (in production, this would go to a server)
        const submission = {
          id: Date.now(),
          name: name || 'Anonymous',
          contact: contact,
          contactType: isEmail ? 'email' : 'phone',
          message: message || '',
          wantsWeeklyUpdates: wantsWeekly,
          submittedAt: new Date().toISOString(),
          verified: false,
          verificationSent: false
        };

        // Save to localStorage for demo purposes
        const submissions = JSON.parse(localStorage.getItem('contact_submissions') || '[]');
        submissions.push(submission);
        localStorage.setItem('contact_submissions', JSON.stringify(submissions));

        // Show success message
        const weeklyText = wantsWeekly ? ' You\'ve opted in for weekly updates.' : '';
        showStatus(
          `‚úì Thanks${name ? ', ' + name : ''}! We've received your ${isEmail ? 'email' : 'phone number'}. ` +
          `A verification ${isEmail ? 'email' : 'text message'} will be sent to confirm.${weeklyText} ` +
          `Reply STOP anytime to unsubscribe.`,
          'success'
        );

        // Reset form
        this.reset();

        // Log for admin review (in production, this would trigger backend verification)
        console.log('New contact submission:', submission);

      } catch (error) {
        console.error('Form submission error:', error);
        showStatus('Something went wrong. Please try again or email us directly.', 'error');
      } finally {
        submitBtn.disabled = false;
        btnText.style.display = 'inline';
        btnLoading.style.display = 'none';
      }
    });

    function showStatus(message, type) {
      const statusDiv = document.getElementById('formStatus');
      statusDiv.textContent = message;
      statusDiv.className = 'form-status ' + type;
      statusDiv.style.display = 'block';

      // Auto-hide after 10 seconds
      setTimeout(() => {
        statusDiv.style.display = 'none';
      }, 10000);
    }
  </script>
</body>
</html>